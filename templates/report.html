<head>
    <link href="https://fonts.googleapis.com/css2?family=Scope+One&display=swap" rel="stylesheet">
</head>

<style>
    body {
        font-family: 'Scope One', serif;
        text-align: center;
    }
</style>

<body>
    <h1> Online Book Store </h1>

    <h3>View Sales Report</h3>
    <div style="margin-left: 40%;">
        <p style="text-align: left;" id='sales'>Total Sales: </p>
        <p style="text-align: left;" id='expenditures'>Total Expenditures: </p>
        <p style="text-align: left;" id='s_per_genre'>Total Sales Per Genre: </p>
        <p style="text-align: left;" id='s_per_author'>Total Sales Per Author: </p>
        <p style="text-align: left;" id='s_per_publisher'>Total Sales Per Publisher: </p>
        <p id='embed'>This should not appear</p>
    </div>
    <p id='mylog' />

    <script>
        // section to log into element instead console
        var actuallog = console.log

        console.log = (...args) => {
            args.map(arg => document.querySelector("#mylog").innerHTML += arg + '<br>')
        }
        document.getElementById('embed').innerHTML = "{{embed}}"
        fetch('/total_sales')
            .then(function (response) {
                return response.json();
            })
            .then(function (text) {
                document.getElementById('sales').innerHTML += text
            })

        fetch('/total_expenditures')
            .then(function (response) {
                return response.json();
            })
            .then(function (text) {
                document.getElementById('expenditures').innerHTML += text
            })

        fetch('/sales_per_genre')
            .then(function (response) {
                return response.json();
            })
            .then(function (text) {
                document.getElementById('s_per_genre').innerHTML += text
            })

        fetch('/sales_per_author')
            .then(function (response) {
                return response.json();
            })
            .then(function (text) {
                document.getElementById('s_per_author').innerHTML += text
            })

        fetch('/sales_per_publisher')
            .then(function (response) {
                return response.json();
            })
            .then(function (text) {
                document.getElementById('s_per_publisher').innerHTML += text
            })



    </script>
</body>